(()=>{"use strict";var e,t={};t.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),(()=>{var e;t.g.importScripts&&(e=t.g.location+"");var s=t.g.document;if(!e&&s&&(s.currentScript&&(e=s.currentScript.src),!e)){var r=s.getElementsByTagName("script");r.length&&(e=r[r.length-1].src)}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),t.p=e})(),function(e){e[e.unauthorized=401]="unauthorized",e[e.notFound=404]="notFound"}(e||(e={}));const s=class{constructor(e,t){this._baseLink=e,this._options=t}getResp({endpoint:e,options:t={}},s=(()=>{console.error("No callback for GET response")})){this.load("GET",e,s,t)}errorHandler(t){if(!t.ok)throw t.status!==e.unauthorized&&t.status!==e.notFound||console.log(`Sorry, but there is ${t.status} error: ${t.statusText}`),Error(t.statusText);return t}makeUrl(e,t){const s=Object.assign(Object.assign({},this._options),e);let r=`${this._baseLink}${t}?`;return Object.keys(s).forEach((e=>{r+=`${e}=${s[e]}&`})),r.slice(0,-1)}load(e,t,s,r={}){fetch(this.makeUrl(r,t),{method:e}).then(this.errorHandler).then((e=>e.json())).then((e=>s(e))).catch((e=>console.error(e)))}},r=class extends s{constructor(){super("https://newsapi-redirect-production.up.railway.app/",{apiKey:"beb9565b064d45e59d52c0a9c93178cf"})}},o=class extends r{getSources(e){super.getResp({endpoint:"sources"},e)}getNews(e,t){let s=e.target;const r=e.currentTarget;for(;s!==r;){if(s.classList.contains("source__item")){const e=s.getAttribute("data-source-id");return void(r.getAttribute("data-source")!==e&&(r.setAttribute("data-source",e),super.getResp({endpoint:"everything",options:{sources:e}},t)))}s=s.parentNode}}},n=t.p+"img/news_placeholder.jpg";class c{constructor(){this.news=new class{draw(e){const t=e.length>=10?e.filter(((e,t)=>t<10)):e,s=document.createDocumentFragment(),r=document.querySelector("#newsItemTemp");r instanceof HTMLTemplateElement&&t.forEach(((e,t)=>{const o=r.content.cloneNode(!0);if(o instanceof DocumentFragment){if(t%2){const e=o.querySelector(".news__item");e&&e.classList.add("alt")}const r=o.querySelector(".news__meta-photo");r&&(r.style.backgroundImage=`url(${e.urlToImage||n})`);const c=o.querySelector(".news__meta-author");c&&(c.textContent=e.author||e.source.name);const a=o.querySelector(".news__meta-date");a&&(a.textContent=e.publishedAt.slice(0,10).split("-").reverse().join("-"));const i=o.querySelector(".news__description-title");i&&(i.textContent=e.title);const u=o.querySelector(".news__description-source");u&&(u.textContent=e.source.name);const l=o.querySelector(".news__description-content");l&&(l.textContent=e.description);const d=o.querySelector(".news__read-more a");d&&d.setAttribute("href",e.url),s.append(o)}}));const o=document.querySelector(".news");o&&(o.innerHTML="",o.appendChild(s))}},this.sources=new class{draw(e,t){const s=document.createDocumentFragment(),r=document.querySelector("#sourceItemTemp");e.forEach((e=>{if(e.name[0]===t&&r){const t=r.content.cloneNode(!0);if(t instanceof DocumentFragment){const r=t.querySelector(".source__item-name");r&&(r.textContent=e.name);const o=t.querySelector(".source__item");o&&o.setAttribute("data-source-id",e.id),s.append(t)}}}));const o=document.querySelector(".sources");o&&o.append(s)}}}drawNews(e){if(e)if("message"in e)console.log(e);else if("articles"in e){const t=e.articles?e.articles:[];this.news.draw(t)}}drawSources(e,t){if(e)if("message"in e)console.log(e);else if("sources"in e){const s=e.sources?e.sources:[];this.sources.draw(s,t)}}}const a=document.querySelector(".main"),i=document.createElement("ul");i.classList.add("alfaBet"),a&&a.prepend(i),["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"].forEach((e=>{const t=document.createElement("li");t&&(t.classList.add("alfaBet__item"),t.textContent=e,i&&i.append(t))})),(new class{constructor(){this.app=new class{constructor(){this.controller=new o,this.view=new c}start(e){document.querySelector(".sources").innerHTML="",document.querySelector(".sources").addEventListener("click",(e=>this.controller.getNews(e,(e=>{if(e)return this.view.drawNews(e)})))),this.controller.getSources((t=>{if(t)return this.view.drawSources(t,e)}))}},this.letter="A"}showAlfaBet(){i.addEventListener("click",(e=>{const t=e.target;t.classList.contains("alfaBet__item")&&(document.querySelectorAll(".alfaBet__item").forEach((e=>{e.classList.remove("alfaBet__item_active")})),t.classList.toggle("alfaBet__item_active"),t.textContent&&(this.letter=t.textContent),this.app.start(this.letter))}))}}).showAlfaBet()})();